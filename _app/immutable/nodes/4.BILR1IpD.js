import{a as b,t as U,d as et,c as xt}from"../chunks/disclose-version.BJojfJSa.js";import{o as wt,p as ae,aI as re,i as r,b as se,s as S,f as X,t as R,a as oe,aJ as ne,$ as ie,k as j,ao as mt,c as C,r as M}from"../chunks/runtime.BMoFuKKA.js";import{d as ce,e as le,s as Y}from"../chunks/render.BZ5I1NMh.js";import{s as de,p as ue,a as pt,i as Q,b as ve}from"../chunks/props.B2cxfWdj.js";import{e as at,a as kt,i as jt}from"../chunks/actions.DRn01URu.js";import{h as fe}from"../chunks/svelte-head.Cmp_PdVF.js";import{s as it,r as me,a as At}from"../chunks/attributes.Bz8qm-d1.js";import{a as pe,b as ye,i as ge,c as be,r as he}from"../chunks/entry.VSt0lAsr.js";import{b as _e}from"../chunks/paths.Dn3r33LO.js";function It(t){var e,c,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(c=It(t[e]))&&(n&&(n+=" "),n+=c)}else for(c in t)t[c]&&(n&&(n+=" "),n+=c);return n}function xe(){for(var t,e,c=0,n="",o=arguments.length;c<o;c++)(t=arguments[c])&&(e=It(t))&&(n&&(n+=" "),n+=e);return n}function we(t){return typeof t=="object"?xe(t):t??""}function ke(t,e,c){var n=t.__className,o=je(e,c);wt&&t.className===o?t.__className=o:(n!==o||wt&&t.className!==o)&&(t.className=o,t.__className=o)}function je(t,e){return(t??"")+(" "+e)}function q(t,e,c){if(c){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function Ae(t){const e=JSON.parse(t);return e.data&&(e.data=pe(e.data,ye.decoders)),e}function ct(t){return HTMLElement.prototype.cloneNode.call(t)}function lt(t,e=()=>{}){const c=async({action:o,result:p,reset:h=!0,invalidateAll:v=!0})=>{p.type==="success"&&(h&&HTMLFormElement.prototype.reset.call(t),v&&await ge()),(location.origin+location.pathname===o.origin+o.pathname||p.type==="redirect"||p.type==="error")&&be(p)};async function n(o){var O,z,E,I,l;if(((O=o.submitter)!=null&&O.hasAttribute("formmethod")?o.submitter.formMethod:ct(t).method)!=="post")return;o.preventDefault();const h=new URL((z=o.submitter)!=null&&z.hasAttribute("formaction")?o.submitter.formAction:ct(t).action),v=(E=o.submitter)!=null&&E.hasAttribute("formenctype")?o.submitter.formEnctype:ct(t).enctype,y=new FormData(t),H=(I=o.submitter)==null?void 0:I.getAttribute("name");H&&y.append(H,((l=o.submitter)==null?void 0:l.getAttribute("value"))??"");const J=new AbortController;let F=!1;const N=await e({action:h,cancel:()=>F=!0,controller:J,formData:y,formElement:t,submitter:o.submitter})??c;if(F)return;let _;try{const i=new Headers({accept:"application/json","x-sveltekit-action":"true"});v!=="multipart/form-data"&&i.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(v)?v:"application/x-www-form-urlencoded");const P=v==="multipart/form-data"?y:new URLSearchParams(y),A=await fetch(h,{method:"POST",headers:i,cache:"no-store",body:P,signal:J.signal});_=Ae(await A.text()),_.type==="error"&&(_.status=A.status)}catch(i){if((i==null?void 0:i.name)==="AbortError")return;_={type:"error",error:i}}N({action:h,formData:y,formElement:t,update:i=>c({action:h,result:_,reset:i==null?void 0:i.reset,invalidateAll:i==null?void 0:i.invalidateAll}),result:_})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",n)}}}var Pt="mz3PUW_p",Lt=["#FFC700","#FF0000","#2E3191","#41BBC7"],Mt=3500,zt=.5,Et=150,St="mix",Wt=12,Ut="",Ht=!0,Nt=800,Tt=1600;function dt(t,e={}){let{colors:c=Lt,duration:n=Mt,force:o=zt,particleCount:p=Et,particleShape:h=St,particleSize:v=Wt,particleClass:y=Ut,destroyAfterDone:H=Ht,stageHeight:J=Nt,stageWidth:F=Tt}=e;(function(l){if(document.querySelector("style[data-neoconfetti]"))return;const i=ut("style");i.dataset.neoconfetti="",i.textContent=l,vt(document.head,i)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",J+"px");let D=[],N=[];const _=()=>Z(W()*(Ee-1)),O=(l,i)=>h!=="rectangles"&&(l==="circles"||Se(i));function z(l,i){const P=_(),A=O(h,P),a=(u,x)=>l.style.setProperty(u,x+"");a("--xlp",ft(rt(Ot(i,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",n-Z(1e3*W())+"ms");const s=W()<Le?G(W()*Me,2):0;a("--x1",s),a("--x2",-1*s),a("--x3",s),a("--x4",G(rt(ft(rt(Ot(i,90)-180),0,180,-1,1)),4)),a("--y1",G(W()*Ft,4)),a("--y2",G(W()*o*(Rt()?1:-1),4)),a("--y3",Ft),a("--y4",G(ze(ft(rt(i-180),0,180,o,-o),0),4)),a("--w",(A?v:Z(4*W())+v/2)+"px"),a("--h",(A?v:Z(2*W())+v)+"px");const d=P.toString(2).padStart(3,"0").split("");a("--hr",d.map(u=>+u/2+"").join(" ")),a("--r",d.join(" ")),a("--rd",G(W()*(Pe-Ct)+Ct)+"ms"),a("--br",A?"50%":0)}let E;function I(){t.innerHTML="",clearTimeout(E),D=Dt(p,c),N=function(l,i=[],P){const A=[];for(const{color:a}of i){const s=ut("div");s.className=`${Pt} ${P}`,s.style.setProperty("--bgc",a);const d=ut("div");vt(s,d),vt(l,s),A.push(s)}return A}(t,D,y);for(const[l,i]of qt(N))z(i,D[+l].degree);E=setTimeout(()=>{H&&(t.innerHTML="")},n)}return I(),{update(l){const i=l.particleCount??Et,P=l.particleShape??St,A=l.particleSize??Wt,a=l.particleClass??Ut,s=l.colors??Lt,d=l.stageHeight??Nt,u=l.duration??Mt,x=l.force??zt,w=l.stageWidth??Tt,f=l.destroyAfterDone??Ht;D=Dt(i,s);let k=!1;if(i===p){N=Array.from(t.querySelectorAll(`.${Pt}`));for(const[T,{color:g}]of qt(D)){const m=N[+T];JSON.stringify(c)!==JSON.stringify(s)&&m.style.setProperty("--bgc",g),P!==h&&m.style.setProperty("--br",O(P,_())?"50%":"0"),a!==y&&(y&&m.classList.remove(y),a&&m.classList.add(a))}}else k=!0;H&&!f&&clearTimeout(E),t.style.setProperty("--sh",d+"px"),n=u,c=s,o=x,p=i,h=P,v=A,y=a,H=f,J=d,F=w,k&&I()},destroy(){t.innerHTML="",clearTimeout(E)}}}var Ct=200,Pe=800,Le=.1,Me=.3,Ft=.5,rt=Math.abs,W=Math.random,Z=Math.round,ze=Math.max,ut=t=>document.createElement(t),vt=(t,e)=>t.appendChild(e),Dt=(t,e)=>Array.from({length:t},(c,n)=>({color:e[n%e.length],degree:360*n/t})),G=(t,e=2)=>Z((t+Number.EPSILON)*10**e)/10**e,ft=(t,e,c,n,o)=>(t-e)*(o-n)/(c-e)+n,Ot=(t,e)=>t+e>360?t+e-360:t+e,Rt=()=>W()>.5,qt=Object.entries,Ee=6,Se=t=>t!==1&&Rt();const Bt="(prefers-reduced-motion: reduce)",We=()=>window.matchMedia(Bt).matches,Ue=he(We(),t=>{{const e=n=>{t(n.matches)},c=window.matchMedia(Bt);return c.addEventListener("change",e),()=>{c.removeEventListener("change",e)}}});function Jt(t,e,c){var o;t.preventDefault();const n=t.target.getAttribute("data-key");n==="backspace"?(mt(e,pt(r(e).slice(0,-1))),(o=c())!=null&&o.badGuess&&c(c().badGuess=!1,!0)):r(e).length<5&&mt(e,r(e)+n)}var He=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Ne=U('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Te=U('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),Ce=U('<p class="svelte-1pg2j5l"> </p>'),Fe=U('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),De=U('<button formaction="?/update" name="key"> </button>'),Oe=U('<div class="row svelte-1pg2j5l"></div>'),qe=U('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Je=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ie=U('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function $e(t,e){ae(e,!0);const c=de(),n=()=>ve(Ue,"$reducedMotion",c);let o=ue(e,"form",15),p=j(()=>e.data.answers.at(-1)==="xxxxx"),h=j(()=>r(p)?-1:e.data.answers.length),v=re(pt(e.data.guesses[r(h)]||""));se(()=>{mt(v,pt(e.data.guesses[r(h)]||""))});let y=j(()=>r(v).length===5);const H=j(()=>{let a={},s={};return e.data.answers.forEach((d,u)=>{const x=e.data.guesses[u];for(let w=0;w<5;w+=1){const f=x[w];d[w]==="x"?(a[f]="exact",s[f]="correct"):a[f]||(a[f]=d[w]==="c"?"close":"missing",s[f]=d[w]==="c"?"present":"absent")}}),{classnames:a,description:s}}),J=j(()=>r(H).classnames),F=j(()=>r(H).description);function D(a){var s;a.metaKey||a.key==="Enter"&&!r(y)||(s=document.querySelector(`[data-key="${a.key}" i]`))==null||s.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var N=Ie();le("keydown",ne,D),fe(a=>{var s=He();ie.title="Sverdle",b(a,s)});var _=S(X(N),2),O=C(_);it(O,"href",_e+"/sverdle/how-to-play");var z=S(O,2);at(z,20,()=>Array.from(Array(6).keys()),a=>a,(a,s)=>{var d=Te();const u=j(()=>s===r(h));var x=X(d),w=C(x);M(x);var f=S(x,2);at(f,20,()=>Array.from(Array(5).keys()),k=>k,(k,T)=>{var g=Ne();const m=j(()=>r(u)?r(v):e.data.guesses[s]),V=j(()=>{var L;return(L=e.data.answers[s])==null?void 0:L[T]}),yt=j(()=>{var L;return((L=r(m))==null?void 0:L[T])??""}),Kt=j(()=>r(u)&&T===r(m).length),gt=j(()=>r(V)==="x"),bt=j(()=>r(V)==="c"),ht=j(()=>r(V)==="_");var _t=C(g),st=S(_t),Qt=C(st);{var Gt=L=>{var $=et("(correct)");b(L,$)},Vt=L=>{var $=xt(),Xt=X($);{var Yt=B=>{var tt=et("(present)");b(B,tt)},Zt=B=>{var tt=xt(),$t=X(tt);{var te=K=>{var nt=et("(absent)");b(K,nt)},ee=K=>{var nt=et("empty");b(K,nt)};Q($t,K=>{r(ht)?K(te):K(ee,!1)},!0)}b(B,tt)};Q(Xt,B=>{r(bt)?B(Yt):B(Zt,!1)},!0)}b(L,$)};Q(Qt,L=>{r(gt)?L(Gt):L(Vt,!1)})}M(st);var ot=S(st,2);me(ot),M(g),R(()=>{q(g,"exact",r(gt)),q(g,"close",r(bt)),q(g,"missing",r(ht)),q(g,"selected",r(Kt)),Y(_t,`${r(yt)??""} `),ot.disabled=!r(u),At(ot,r(yt))}),b(k,g)}),M(f),R(()=>{Y(w,`Row ${s+1}`),q(f,"current",r(u))}),b(a,d)}),M(z);var E=S(z,2),I=C(E);{var l=a=>{var s=Fe(),d=X(s);{var u=f=>{var k=Ce(),T=C(k);M(k),R(()=>Y(T,`the answer was "${e.data.answer??""}"`)),b(f,k)};Q(d,f=>{!r(p)&&e.data.answer&&f(u)})}var x=S(d,2),w=C(x);M(x),R(()=>Y(w,`${(r(p)?"you won :)":"game over :(")??""} play again?`)),b(a,s)},i=a=>{var s=qe(),d=C(s),u=S(d,2);u.__click=[Jt,v,o];var x=S(u,2);at(x,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],jt,(w,f)=>{var k=Oe();at(k,21,()=>f,jt,(T,g)=>{var m=De();m.__click=[Jt,v,o];var V=C(m,!0);M(m),R(()=>{it(m,"data-key",r(g)),ke(m,we(r(J)[r(g)]),"svelte-1pg2j5l"),m.disabled=r(y),At(m,r(g)),it(m,"aria-label",`${r(g)??""} ${(r(F)[r(g)]||"")??""}`),Y(V,r(g))}),b(T,m)}),M(k),b(w,k)}),M(s),R(()=>{d.disabled=!r(y),q(d,"selected",r(y))}),b(a,s)};Q(I,a=>{r(p)||e.data.answers.length>=6?a(l):a(i,!1)})}M(E),M(_),kt(_,(a,s)=>lt==null?void 0:lt(a,s),()=>()=>({update:a})=>{a({reset:!1})});var P=S(_,2);{var A=a=>{var s=Je();kt(s,(d,u)=>dt==null?void 0:dt(d,u),()=>({particleCount:n()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),b(a,s)};Q(P,a=>{r(p)&&a(A)})}R(()=>{var a;q(z,"playing",!r(p)),q(z,"bad-guess",(a=o())==null?void 0:a.badGuess)}),b(t,N),oe()}ce(["click"]);export{$e as component};
